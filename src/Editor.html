<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width,initial-scale=1">
<head>    
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/format-pop-up.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
</head> 
<body>
    <div class="sample-toolbar">    
        <a href="javascript:void(0)" onclick="format('bold')"><span class="fa fa-bold fa-fw"></span></a>
		<a href="javascript:void(0)" onclick="format('italic')"><span class="fa fa-italic fa-fw"></span></a>
		<a href="javascript:void(0)" onclick="format('insertunorderedlist')"><span class="fa fa-list fa-fw"></span></a>
		<a href="javascript:void(0)" onclick="setUrl()"><span class="fa fa-link fa-fw"></span></a>
		<span><input id="txtFormatUrl" placeholder="url" class="form-control"></span>
    </div>
    <div class="editor" id="sampleeditor"> 
        
    </div>
    <div id="format-pop">
            <div id="format-btn-container">
                <button class="format-btn" onclick="format('bold')"><i class="fa fa-bold"></i></button>
                <button class="format-btn" onclick="format('italic')"><i class="fa fa-italic"></i></button>
                <button class="format-btn" onclick="format('strikethrough')"><i class="fa fa-strikethrough"></i></button> 
                &nbsp
                <button class="format-btn" onclick="format('bold')"><i class="fa fa-home"></i></button>
                <button class="format-btn" onclick="format('bold')"><i class="fa fa-home"></i></button>
                <button class="format-btn" onclick="format('bold')"><i class="fa fa-home"></i></button>
            </div>
        </div>
    <script>
    document.onmouseup = doSomethingWithSelectedText;
    document.onkeyup = doSomethingWithSelectedText;

    window.addEventListener('load', function(){
        document.getElementById('sampleeditor').setAttribute('contenteditable', 'true');
        document.getElementById('sampleeditor2').setAttribute('contenteditable', 'true');
    });

    function format(command, value) {
        document.execCommand(command, false, value);
    }

    function setUrl() {
        var url = document.getElementById('txtFormatUrl').value;
        var sText = document.getSelection();
        document.execCommand('insertHTML', false, '<a href="' + url + '" target="_blank">' + sText + '</a>');
        document.getElementById('txtFormatUrl').value = '';
    }
    function getSelectedText() {
        var text = "";
        if (typeof window.getSelection != "undefined") {
            text = window.getSelection().toString();
        } else if (typeof document.selection != "undefined" && document.selection.type == "Text") {
            text = document.selection.createRange().text;
        }
        return text;
    }

    function doSomethingWithSelectedText() {
        var formatPopUp = document.getElementById("format-pop")
        
        var selectedText = getSelectedText();
        if (selectedText) {
            if (formatPopUp.style.display === "none") {
                formatPopUp.style.display = "block";
            } else {
                formatPopUp.style.display = "none";
            }
            //alert("Got selected text " + selectedText);
        }
    }    
    </script>
</body>
</html>